{
  "nodes": [
    "SVCW",
    "PowerGrid"
  ],
  "connections": [
    "PowerGridToSVCW",
    "PowerGridToVirtualDemand"
  ],
  "virtual_tags": {},
  "PowerGridToSVCW": {
    "type": "Wire",
    "source": "PowerGrid",
    "destination": "SVCW",
    "contents": "Electricity",
    "bidirectional": false,
    "entry_point": "null",
    "tags": {
      "CGN_ENG_DAILY_DATA.PLANT_PURCHASED_KWH": {
        "units": "hour * kilowatt",
        "source_unit_id": "total",
        "dest_unit_id": "total",
        "totalized": true,
        "type": "Flow",
        "contents": "Electricity"
      }
    },
    "virtual_tags": {}
  },
  "PowerGridToVirtualDemand": {
    "type": "Wire",
    "source": "PowerGrid",
    "destination": "SVCW",
    "contents": "Electricity",
    "bidirectional": false,
    "entry_point": "VirtualDemand",
    "tags": {
    },
    "virtual_tags": {
      "PowerGrid_SVCW_VirtualDemand_Electricity_Flow": {
        "units": "hour * kilowatt",
        "tags": [
          "CGN_ENG_DAILY_DATA.PLANT_PURCHASED_KWH",
          "Battery(KW)"
        ],
        "operations": "lambda tag1,tag2: tag1-tag2",
        "type": "Flow",
        "contents": "Electricity"
      }
    }
  },
  "SVCW": {
    "type": "Facility",
    "input_contents": [
      "UntreatedSewage"
    ],
    "output_contents": [
      "TreatedSewage"
    ],
    "tags": {},
    "virtual_tags": {},
    "nodes": [
      "PrimaryClarifier",
      "AerationBasin",
      "Cogenerator",
      "VirtualDemand",
      "LiftPump",
      "Battery",
      "Blower"
    ],
    "connections": [
      "LiftPumpToPrimaryClarifier",
      "PrimaryToAerationBasin",
      "BlowerToAerationBasin",
      "CogeneratorToSVCW",
      "BatteryToSVCW"
    ],
    "flowrate": {
      "design": null,
      "units": null,
      "min_flow": null,
      "max_flow": null
    }
  },
  "PowerGrid": {
    "type": "Network",
    "input_contents": [
      "Electricity",
      "NaturalGas"
    ],
    "output_contents": [
      "Electricity",
      "NaturalGas"
    ],
    "tags": {},
    "virtual_tags": {},
    "nodes": [],
    "connections": []
  },
  "PrimaryClarifier": {
    "type": "Clarification",
    "input_contents": [
      "UntreatedSewage"
    ],
    "output_contents": [
      "PrimaryEffluent"
    ],
    "tags": {},
    "virtual_tags": {},
    "volume": {
      "value": 792.87,
      "units": "m ** 3"
    },
    "flowrate": {
      "design": 2,
      "units": "MGD",
      "min_flow": null,
      "max_flow": null
    },
    "num_units": 5
  },
  "AerationBasin": {
    "type": "Aeration",
    "input_contents": [
      "PrimaryEffluent",
      "WasteActivatedSludge",
      "Air"
    ],
    "output_contents": [
      "PrimaryEffluent"
    ],
    "tags": {},
    "virtual_tags": {
      "AerationBasin_Mixers_Power": {
        "units": "kilowatt",
        "tags": [
        "AB_MON_FIT_16101.ScldAnlgS",
        "AB_MON_FIT_16102.ScldAnlgS",
        "AB_MON_FIT_16201.ScldAnlgS",
        "AB_MON_FIT_16202.ScldAnlgS",
        "AB_MON_FIT_16301.ScldAnlgS",
        "AB_MON_FIT_16302.ScldAnlgS",
        "AB_MON_FIT_16401.ScldAnlgS",
        "AB_MON_FIT_16402.ScldAnlgS"
      ],
      "custom_operations": "lambda a1, a2, a3, a4, a5, a6, a7, a8: np.where(sum([a1, a2, a3, a4, a5, a6, a7, a8]) > 100 * 24, 70 * (1/1.34), 0)",
        "type": "Power",
        "contents": "Electricity"
      },
      "AerationBasin_TotalAerationPower": {
        "units": "kilowatt",
        "tags": [
          "AerationBasin_Blower_Power",
          "AerationBasin_Mixers_Power"
        ],
        "binary_operations": ["+"],
        "type": "Power",
        "contents": "Electricity"
      }
    },
    "volume": {
      "value": 2319.72,
      "units": "m ** 3"
    },
    "flowrate": {
      "design": 1.63,
      "units": "MGD",
      "min_flow": null,
      "max_flow": null
    },
    "num_units": 8
  },
  "Cogenerator": {
    "type": "Cogeneration",
    "input_contents": [
      "Biogas",
      "NaturalGas"
    ],
    "output_contents": [
      "Electricity"
    ],
    "tags": {
    },
    "virtual_tags": {},
    "generation_capacity": {
      "min": 0,
      "max": 1266,
      "design": 1266,
      "units": "kilowatt"
    },
    "num_units": 2
  },
  "VirtualDemand": {
    "type": "Network",
    "input_contents": [
      "Electricity"
    ],
    "output_contents": [
      "Electricity"
    ],
    "tags": {},
    "virtual_tags": {
      "VirtualDemand_Electricity_InFlow": {
        "units": "hour * kilowatt",
        "tags": [
          "PowerGrid_SVCW_VirtualDemand_Electricity_Flow",
          "CGN_ENG_DAILY_DATA.CGN_NET_ELECTRICITY_KWH",
          "Battery(KW)"
        ],
        "operations": "lambda tag1,tag2,tag3: tag1+tag2+tag3",
        "type": "Flow",
        "contents": "Electricity"
      },
      "VirtualDemand_RestOfFacilityPower": {
        "units": "kilowatt",
        "tags": [
          "VirtualDemand_Electricity_InFlow",
          "AerationBasin_TotalAerationPower"
        ],
        "operations": "lambda inflow, aeration: np.maximum(0, inflow - aeration)",
        "type": "Power",
        "contents": "Electricity"
      }
    },
    "nodes": [],
    "connections": []
  },
  "LiftPump": {
    "type": "Pump",
    "input_contents": [
      "UntreatedSewage"
    ],
    "output_contents": [
      "UntreatedSewage"
    ],
    "tags": {},
    "virtual_tags": {},
    "pump_type": "Constant",
    "flowrate": {
      "design": null,
      "units": null,
      "min_flow": null,
      "max_flow": null
    },
    "num_units": null
  },
  "Battery": {
    "type": "Battery",
    "input_contents": [
      "Electricity"
    ],
    "output_contents": [
      "Electricity"
    ],
    "tags": {
      "Battery(KW)": {
        "units": "kW",
        "source_unit_id": null,
        "dest_unit_id": null,
        "totalized": false,
        "type": "NetFlow",
        "contents": "Electricity"
      }
    },
    "virtual_tags": {},
    "capacity": {
      "value": 2000,
      "units": "kWh"
    },
    "charge_rate": {
      "value": 1000,
      "units": "kW"
    },
    "discharge_rate": {
      "value": 1000,
      "units": "kW"
    },
    "rte": 0.88,
    "leakage": {
      "value": 0.0001,
      "units": "kW"
    }
  },
  "LiftPumpToPrimaryClarifier": {
    "type": "Pipe",
    "source": "LiftPump",
    "destination": "PrimaryClarifier",
    "contents": "PrimaryEffluent",
    "bidirectional": false,
    "flowrate": {
      "design": null,
      "units": null,
      "min_flow": null,
      "max_flow": null
    },
    "pressure": {
      "min": null,
      "max": null,
      "design": null,
      "units": null
    },
    "tags": {
      "FEP_INFLUENT_FLOW.PV": {
        "units": "gallon / minute",
        "source_unit_id": "total",
        "dest_unit_id": "total",
        "totalized": false,
        "type": "Flow",
        "contents": "UntreatedSewage"
      }
    },
    "virtual_tags": {}
  },
  "PrimaryToAerationBasin": {
    "type": "Pipe",
    "source": "PrimaryClarifier",
    "destination": "AerationBasin",
    "contents": "PrimaryEffluent",
    "bidirectional": false,
    "flowrate": {
      "design": null,
      "units": null,
      "min_flow": null,
      "max_flow": null
    },
    "pressure": {
      "min": null,
      "max": null,
      "design": null,
      "units": null
    },
    "tags": {},
    "virtual_tags": {}
  },
  "CogeneratorToSVCW": {
    "type": "Wire",
    "source": "Cogenerator",
    "destination": "VirtualDemand",
    "contents": "Electricity",
    "bidirectional": false,
    "tags": {      
      "CGN_ENG_DAILY_DATA.CGN_NET_ELECTRICITY_KWH": {
        "units": "hour * kilowatt",
        "source_unit_id": "total",
        "dest_unit_id": null,
        "totalized": true,
        "type": "Flow",
        "contents": "Electricity"
      }
    },
    "virtual_tags": {}
  },
  "BatteryToSVCW": {
    "type": "Wire",
    "source": "Battery",
    "destination": "VirtualDemand",
    "contents": "Electricity",
    "bidirectional": false,
    "tags": {},
    "virtual_tags": {
    }
  }
}